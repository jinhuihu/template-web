# 移动端适配方案 - 团队使用规范

## 📐 设计基准

| 项目 | 值 | 说明 |
|------|-----|------|
| **设计稿宽度** | 750px | UI设计师统一使用此宽度 |
| **rem基准** | 100px | 1rem = 100px |
| **最大宽度** | 750px | 移动端最大显示宽度 |
| **PC端展示** | 750px居中容器 | 模拟手机效果 |

## 🎯 核心原则

### 1. 设计稿 → 代码转换规则

**简单公式：rem值 = 设计稿px值 ÷ 100**

| 设计稿标注 | 代码写法 | 说明 |
|-----------|---------|------|
| 750px | 7.5rem | 全屏宽度 |
| 375px | 3.75rem | 半屏宽度 |
| 100px | 1rem | 常用尺寸 |
| 60px | 0.6rem | 中等尺寸 |
| 40px | 0.4rem | 小尺寸 |
| 20px | 0.2rem | 间距 |
| 12px | 0.12rem | 小字体 |
| 1px | 0.01rem | 细线 |

### 2. 字体大小规范

| 用途 | 设计稿 | 代码 | 实际效果 |
|------|--------|------|---------|
| 大标题 | 48px | 0.48rem | ~18px |
| 标题 | 36px | 0.36rem | ~14px |
| 正文 | 28px | 0.28rem | ~11px |
| 辅助文字 | 24px | 0.24rem | ~9px |
| 小字 | 20px | 0.2rem | ~8px |

**注意：** 字体大小建议使用px而不是rem，以保证可读性：

```css
/* 推荐 */
.title {
  font-size: 18px;  /* 固定字体大小 */
  height: 0.6rem;   /* 容器高度使用rem */
  padding: 0.2rem;  /* 间距使用rem */
}
```

### 3. 1px边框问题

设计稿中的1px边框，使用 `.hairline` 或 `.border-1px` 类：

```html
<div class="card hairline">
  内容
</div>
```

或使用CSS：

```css
.element {
  position: relative;
}

.element::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 200%;
  height: 200%;
  border: 1px solid #e5e5e5;
  transform: scale(0.5);
  transform-origin: 0 0;
}
```

## 💻 代码示例

### 示例1：卡片组件

**设计稿标注：**
- 宽度：690px
- 高度：200px
- 内边距：30px
- 圆角：20px
- 边距：30px

**代码实现：**

```html
<div class="card">
  <h3 class="card-title">标题</h3>
  <p class="card-content">内容</p>
</div>
```

```css
.card {
  width: 6.9rem;        /* 690px */
  height: 2rem;         /* 200px */
  padding: 0.3rem;      /* 30px */
  margin: 0.3rem;       /* 30px */
  border-radius: 0.2rem; /* 20px */
  background: white;
  box-shadow: 0 0.02rem 0.1rem rgba(0, 0, 0, 0.1);
}

.card-title {
  font-size: 16px;      /* 字体固定，不使用rem */
  font-weight: bold;
  margin-bottom: 0.2rem; /* 20px */
}

.card-content {
  font-size: 14px;
  color: #666;
  line-height: 1.6;
}
```

### 示例2：列表布局

```html
<div class="list">
  <div class="list-item">
    <div class="list-item-content">
      <h4 class="list-title">标题</h4>
      <p class="list-desc">描述</p>
    </div>
  </div>
</div>
```

```css
.list {
  padding: 0 0.3rem; /* 左右间距30px */
}

.list-item {
  height: 1.2rem;        /* 120px */
  padding: 0.2rem;       /* 20px */
  margin-bottom: 0.2rem; /* 20px */
  background: white;
  border-radius: 0.1rem; /* 10px */
}

.list-title {
  font-size: 15px;
  margin-bottom: 0.08rem; /* 8px */
}

.list-desc {
  font-size: 13px;
  color: #999;
}
```

### 示例3：Flex布局

```html
<div class="flex-container">
  <div class="flex-item">项目1</div>
  <div class="flex-item">项目2</div>
  <div class="flex-item">项目3</div>
</div>
```

```css
.flex-container {
  display: flex;
  justify-content: space-between;
  padding: 0.3rem;       /* 30px */
  gap: 0.2rem;          /* 间距20px */
}

.flex-item {
  flex: 1;
  height: 1rem;         /* 100px */
  padding: 0.2rem;      /* 20px */
  background: white;
  border-radius: 0.08rem; /* 8px */
  text-align: center;
}
```

## 🎨 常用尺寸对照表

### 间距

| 用途 | 设计稿 | 代码 |
|------|--------|------|
| 最小间距 | 10px | 0.1rem |
| 小间距 | 20px | 0.2rem |
| 常规间距 | 30px | 0.3rem |
| 大间距 | 40px | 0.4rem |
| 超大间距 | 60px | 0.6rem |

### 圆角

| 用途 | 设计稿 | 代码 |
|------|--------|------|
| 微小圆角 | 4px | 0.04rem |
| 小圆角 | 8px | 0.08rem |
| 常规圆角 | 12px | 0.12rem |
| 大圆角 | 20px | 0.2rem |
| 圆形 | 50% | 50% |

### 高度

| 用途 | 设计稿 | 代码 |
|------|--------|------|
| 按钮高度 | 80px | 0.8rem |
| 输入框高度 | 88px | 0.88rem |
| 列表项高度 | 120px | 1.2rem |
| 导航栏高度 | 88px | 0.88rem |

## 📱 设备适配

### 移动端

在手机上打开时：
- 自动按屏幕宽度缩放
- rem值动态计算
- 充满整个屏幕
- 禁用缩放

### PC端

在PC浏览器打开时：
- 显示750px宽度的模拟器
- 居中显示
- 带手机外壳效果
- 顶部显示提示信息

## 🛠️ 工具类

### Flex布局

```css
/* 使用工具类 */
<div class="flex-between">
  <span>左边</span>
  <span>右边</span>
</div>

<div class="flex-center">
  居中内容
</div>
```

### 文本溢出

```css
/* 单行省略 */
<p class="ellipsis">很长的文本内容...</p>

/* 两行省略 */
<p class="ellipsis-2">很长的文本内容...</p>

/* 三行省略 */
<p class="ellipsis-3">很长的文本内容...</p>
```

### 安全区域（刘海屏）

```css
/* 顶部安全区域 */
<header class="safe-area-top">
  导航栏
</header>

/* 底部安全区域 */
<footer class="safe-area-bottom">
  底部导航
</footer>
```

## ⚠️ 注意事项

### 1. 边框不使用rem

```css
/* ❌ 错误 */
.box {
  border: 0.01rem solid #ddd;
}

/* ✅ 正确 */
.box {
  border: 1px solid #ddd;
}

/* 或使用hairline类 */
.box {
  /* 使用伪元素实现0.5px边框 */
}
```

### 2. 字体大小建议使用px

```css
/* ❌ 不推荐 */
.text {
  font-size: 0.28rem; /* 会随屏幕缩放，小屏幕可能太小 */
}

/* ✅ 推荐 */
.text {
  font-size: 14px; /* 固定大小，保证可读性 */
}
```

### 3. 图片适配

```css
/* 容器使用rem */
.image-wrapper {
  width: 7rem;    /* 700px */
  height: 4rem;   /* 400px */
}

/* 图片填充容器 */
.image-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
```

### 4. 高清图片处理

```html
<!-- 使用2倍图 -->
<img src="image@2x.png" style="width: 1.5rem; height: 1.5rem;">

<!-- 或使用srcset -->
<img srcset="image.png 1x, image@2x.png 2x" 
     style="width: 1.5rem; height: 1.5rem;">
```

## 🔧 开发工具

### VSCode插件推荐

1. **px to rem** - 自动转换px到rem
2. **cssrem** - 快速计算rem值

### 配置示例（VSCode）

```json
{
  "cssrem.rootFontSize": 100,
  "cssrem.fixedDigits": 2
}
```

安装后，输入px值会自动提示rem值。

## 📋 检查清单

开发前检查：

- [ ] 已引入 `flexible.js` 脚本
- [ ] 已引入 `mobile-adapter.css` 样式
- [ ] viewport meta标签配置正确
- [ ] 设计稿确认为750px宽度

代码review检查：

- [ ] 尺寸使用rem单位（除边框和字体）
- [ ] 字体使用px单位
- [ ] 边框使用px或hairline类
- [ ] 计算正确：设计稿px ÷ 100 = rem
- [ ] 图片使用2倍图
- [ ] 考虑安全区域（刘海屏）

## 🧪 测试

### 测试设备

必测设备：
- [ ] iPhone SE (375px)
- [ ] iPhone 12/13/14 (390px)
- [ ] iPhone 14 Pro Max (430px)
- [ ] 安卓主流机型 (360px-420px)
- [ ] PC浏览器（模拟器效果）

### 测试要点

1. **布局测试**
   - 各元素比例正确
   - 间距合理
   - 无横向滚动

2. **字体测试**
   - 小屏幕文字可读
   - 大屏幕文字不过大

3. **交互测试**
   - 点击区域足够大
   - 无误触
   - 滚动流畅

4. **PC端测试**
   - 模拟器正常显示
   - 居中对齐
   - 外壳效果正常

## 🎯 最佳实践

### 1. 布局优先使用Flex

```css
.container {
  display: flex;
  padding: 0.3rem;      /* 间距使用rem */
}

.item {
  flex: 1;
  font-size: 14px;      /* 字体使用px */
}
```

### 2. 固定高度慎用

```css
/* ❌ 避免固定高度 */
.content {
  height: 5rem;
  overflow: hidden;  /* 内容可能被截断 */
}

/* ✅ 使用最小高度 */
.content {
  min-height: 5rem;
  padding: 0.3rem;
}
```

### 3. 响应式图片

```css
.responsive-image {
  width: 100%;
  height: auto;
  display: block;
}
```

### 4. 安全区域处理

```css
/* 导航栏 */
.navbar {
  height: 0.88rem;              /* 88px */
  padding-top: constant(safe-area-inset-top);
  padding-top: env(safe-area-inset-top);
}

/* 底部操作栏 */
.footer {
  height: 1rem;                 /* 100px */
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
}
```

## 📝 代码模板

### 页面模板

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>页面标题</title>
  
  <!-- 移动端适配 - 必须最先加载 -->
  <script src="assets/js/flexible.js"></script>
  
  <!-- 移动端适配样式 -->
  <link rel="stylesheet" href="assets/css/mobile-adapter.css">
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <!-- 页面内容 -->
</body>
</html>
```

### 组件模板

```html
<div class="component">
  <div class="component-header">
    <h3 class="title">标题</h3>
  </div>
  <div class="component-body">
    内容
  </div>
</div>
```

```css
.component {
  width: 7rem;          /* 700px */
  padding: 0.3rem;      /* 30px */
  margin: 0.3rem auto;  /* 30px 居中 */
  background: white;
  border-radius: 0.16rem; /* 16px */
}

.component-header {
  height: 0.8rem;       /* 80px */
  display: flex;
  align-items: center;
  border-bottom: 1px solid #f0f0f0;
}

.title {
  font-size: 16px;      /* 固定字体 */
  font-weight: bold;
  color: #333;
}

.component-body {
  padding: 0.2rem 0;    /* 20px 上下 */
  font-size: 14px;
  color: #666;
  line-height: 1.6;
}
```

## 🚀 快速开始

### 步骤1：引入文件

确保所有HTML页面都引入了：

```html
<!-- 1. flexible.js -->
<script src="assets/js/flexible.js"></script>

<!-- 2. mobile-adapter.css -->
<link rel="stylesheet" href="assets/css/mobile-adapter.css">
```

### 步骤2：使用rem编写样式

```css
/* 设计稿标注：宽度690px，高度200px，内边距30px */
.box {
  width: 6.9rem;
  height: 2rem;
  padding: 0.3rem;
}
```

### 步骤3：测试

```bash
# 启动开发服务器
npm run dev

# 在浏览器打开
# - 手机浏览器：全屏自适应
# - PC浏览器：750px居中模拟器
```

## 🎨 设计师协作

### 设计稿要求

1. **宽度固定750px**
2. **标注单位使用px**
3. **提供2倍图资源**
4. **标注字体大小、颜色、间距**

### 设计稿交付清单

- [ ] 设计稿（750px宽度）
- [ ] 切图资源（@2x）
- [ ] 标注文档（尺寸、颜色、字体）
- [ ] 交互说明

## 🐛 常见问题

### Q1: 为什么在PC上看起来很大？

A: 这是正常的，PC端显示的是750px的模拟器。实际在手机上会按屏幕大小自适应。

### Q2: 字体太小怎么办？

A: 字体应该使用px而不是rem，确保在小屏幕上可读：

```css
/* 使用px */
.text {
  font-size: 14px; /* 不会随屏幕缩放 */
}
```

### Q3: 1px边框在Retina屏上太粗？

A: 使用 `.hairline` 类或伪元素scale方案：

```html
<div class="box hairline"></div>
```

### Q4: 横竖屏切换有问题？

A: flexible.js会自动处理，无需额外代码。

### Q5: 底部被刘海屏遮挡？

A: 使用安全区域：

```css
.footer {
  padding-bottom: env(safe-area-inset-bottom);
}
```

## 📚 参考资源

- `移动端适配-设计规范.md` - 设计师使用手册
- `移动端适配-开发指南.md` - 开发详细教程
- `移动端适配-示例代码.md` - 更多代码示例

## ✅ 上线前检查

- [ ] 所有页面都引入了 flexible.js
- [ ] 所有页面都引入了 mobile-adapter.css
- [ ] viewport配置正确
- [ ] 尺寸单位使用正确（rem/px）
- [ ] 在多种设备上测试通过
- [ ] PC端模拟器显示正常
- [ ] 字体大小合适
- [ ] 图片清晰（使用2倍图）
- [ ] 安全区域适配（如有刘海屏）

---

**遵循此规范，确保团队开发的一致性和高效性！** 🚀

