# é™æ€é¡µé¢æ‰“åŒ…æ¸²æŸ“å·¥å…·

ä¸€ä¸ªåŸºäº Node.js å’Œ art-template çš„é™æ€é¡µé¢ç”Ÿæˆå·¥å…·ï¼Œå¯ä»¥ä»åç«¯APIè·å–æ•°æ®ï¼Œå¡«å……åˆ°HTMLæ¨¡æ¿ä¸­ï¼Œç”Ÿæˆå¯ç›´æ¥éƒ¨ç½²çš„é™æ€HTMLæ–‡ä»¶ã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **å¿«é€Ÿæ„å»º** - åŸºäºé«˜æ€§èƒ½çš„ art-template æ¨¡æ¿å¼•æ“
- ğŸ“¡ **APIé›†æˆ** - è‡ªåŠ¨ä»åç«¯æ¥å£è·å–æ•°æ®
- ğŸ¨ **çµæ´»å®šåˆ¶** - æ”¯æŒå¤šç§æ¨¡æ¿è¯­æ³•
- âš¡ï¸ **é«˜æ€§èƒ½** - æé€Ÿæ¸²æŸ“ï¼Œæ‰¹é‡ç”Ÿæˆ
- ğŸ”„ **çƒ­æ›´æ–°** - å¼€å‘æ¨¡å¼æ”¯æŒæ–‡ä»¶ç›‘å¬
- ğŸ“¦ **å¼€ç®±å³ç”¨** - å®Œæ•´çš„é¡¹ç›®ç»“æ„å’Œç¤ºä¾‹

## ğŸ“¦ å®‰è£…

```bash
# å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®åï¼Œå®‰è£…ä¾èµ–
npm install
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1ï¼šä¸€é”®æ„å»ºï¼ˆæ¨èï¼‰

```bash
npm run build:full
```

è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨æ£€æŸ¥å¹¶å¯åŠ¨MockæœåŠ¡å™¨ï¼Œç„¶åæ„å»ºé¡µé¢ã€‚

### æ–¹æ³•2ï¼šæ‰‹åŠ¨å¯åŠ¨

**ç»ˆç«¯1** - å¯åŠ¨Mock APIæœåŠ¡å™¨ï¼š

```bash
npm start
```

æœåŠ¡å™¨ä¼šåœ¨ http://localhost:3000 å¯åŠ¨ï¼Œæä¾›æµ‹è¯•æ•°æ®ã€‚

**ç»ˆç«¯2** - æ„å»ºé™æ€é¡µé¢ï¼š

```bash
npm run build
```

ç”Ÿæˆçš„é™æ€æ–‡ä»¶ä¼šè¾“å‡ºåˆ° `dist/` ç›®å½•ã€‚

### å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰

```bash
# ç¡®ä¿MockæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
npm run dev
```

âš ï¸ **é‡è¦æç¤º**ï¼šæ„å»ºå‰å¿…é¡»ç¡®ä¿Mock APIæœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼å¦åˆ™ä¼šå‡ºç°è¿æ¥é”™è¯¯ã€‚

### å¼€å‘æœåŠ¡å™¨ï¼ˆæ¨èï¼‰

å¼€å‘æœåŠ¡å™¨æä¾›å®Œæ•´çš„å¼€å‘ç¯å¢ƒï¼š
- é™æ€æ–‡ä»¶æœåŠ¡
- çƒ­æ›´æ–°åŠŸèƒ½
- æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°
- æ–‡ä»¶å˜åŒ–ç›‘å¬

**è®¿é—®åœ°å€ï¼š** http://localhost:3000

### ç«¯å£å†²çªè§£å†³

å¦‚æœé‡åˆ°ç«¯å£è¢«å ç”¨çš„é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¸…ç†ï¼š

```bash
# æ¸…ç†å ç”¨ç«¯å£çš„è¿›ç¨‹
npm run kill-ports

# æˆ–è€…ä¸€é”®æ¸…ç†å¹¶å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev:clean
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
project/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ index.js           # ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ builder.js         # é¡µé¢æ„å»ºå™¨
â”‚   â”œâ”€â”€ api.js             # APIè¯·æ±‚æ¨¡å—
â”‚   â””â”€â”€ watcher.js         # æ–‡ä»¶ç›‘å¬æ¨¡å—
â”œâ”€â”€ templates/             # HTMLæ¨¡æ¿ç›®å½•
â”‚   â”œâ”€â”€ index.html         # é¦–é¡µæ¨¡æ¿
â”‚   â”œâ”€â”€ about.html         # å…³äºé¡µé¢æ¨¡æ¿
â”‚   â””â”€â”€ product.html       # äº§å“é¡µé¢æ¨¡æ¿
â”œâ”€â”€ assets/                # é™æ€èµ„æºç›®å½•
â”‚   â”œâ”€â”€ css/               # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/                # JavaScriptæ–‡ä»¶
â”‚   â””â”€â”€ images/            # å›¾ç‰‡æ–‡ä»¶
â”œâ”€â”€ dist/                  # è¾“å‡ºç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ config.js              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ mock-server.js         # Mock APIæœåŠ¡å™¨
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## âš™ï¸ é…ç½®è¯´æ˜

ç¼–è¾‘ `config.js` æ–‡ä»¶æ¥é…ç½®ä½ çš„é¡¹ç›®ï¼š

```javascript
module.exports = {
  // æ¨¡æ¿é…ç½®åˆ—è¡¨
  templates: [
    {
      name: 'index.html',        // æ¨¡æ¿æ–‡ä»¶å
      output: 'index.html',      // è¾“å‡ºæ–‡ä»¶å
      api: '/api/home',          // APIç«¯ç‚¹
      method: 'GET',             // è¯·æ±‚æ–¹æ³•
      params: {},                // è¯·æ±‚å‚æ•°
      transform: (data) => data  // æ•°æ®è½¬æ¢å‡½æ•°ï¼ˆå¯é€‰ï¼‰
    }
  ],

  // APIé…ç½®
  api: {
    baseUrl: 'http://localhost:3000',  // APIåŸºç¡€URL
    timeout: 10000,                     // è¶…æ—¶æ—¶é—´
    headers: {                          // è¯·æ±‚å¤´
      'Content-Type': 'application/json'
    }
  },

  // ç›®å½•é…ç½®
  paths: {
    templateDir: './templates',   // æ¨¡æ¿ç›®å½•
    outputDir: './dist',          // è¾“å‡ºç›®å½•
    assetsDir: './assets'         // é™æ€èµ„æºç›®å½•
  }
};
```

## ğŸ“ æ¨¡æ¿è¯­æ³•

æœ¬å·¥å…·ä½¿ç”¨ [art-template](https://aui.github.io/art-template/) ä½œä¸ºæ¨¡æ¿å¼•æ“ï¼Œæ”¯æŒä¸¤ç§è¯­æ³•ï¼š

### æ ‡å‡†è¯­æ³•

```html
<!-- è¾“å‡ºå˜é‡ -->
<h1>{{title}}</h1>

<!-- æ¡ä»¶åˆ¤æ–­ -->
{{if user}}
  <p>æ¬¢è¿, {{user.name}}</p>
{{/if}}

<!-- å¾ªç¯ -->
{{each products}}
  <div>{{$value.name}}</div>
{{/each}}
```

### åŸå§‹è¯­æ³•

```html
<!-- è¾“å‡ºå˜é‡ -->
<h1><%= title %></h1>

<!-- æ¡ä»¶åˆ¤æ–­ -->
<% if (user) { %>
  <p>æ¬¢è¿, <%= user.name %></p>
<% } %>

<!-- å¾ªç¯ -->
<% products.forEach(function(product) { %>
  <div><%= product.name %></div>
<% }) %>
```

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### 1. åˆ›å»ºæ¨¡æ¿

åœ¨ `templates/` ç›®å½•ä¸‹åˆ›å»º HTML æ¨¡æ¿æ–‡ä»¶ï¼š

```html
<!-- templates/blog.html -->
<!DOCTYPE html>
<html>
<head>
  <title>{{title}}</title>
</head>
<body>
  <h1>{{title}}</h1>
  
  {{each posts}}
  <article>
    <h2>{{$value.title}}</h2>
    <p>{{$value.content}}</p>
    <span>ä½œè€…: {{$value.author}}</span>
  </article>
  {{/each}}
</body>
</html>
```

### 2. é…ç½®æ¨¡æ¿

åœ¨ `config.js` ä¸­æ·»åŠ é…ç½®ï¼š

```javascript
templates: [
  {
    name: 'blog.html',
    output: 'blog.html',
    api: '/api/blog-posts',
    method: 'GET',
    transform: (data) => {
      // å¯ä»¥å¯¹APIè¿”å›çš„æ•°æ®è¿›è¡Œå¤„ç†
      return {
        title: data.blogTitle,
        posts: data.items.slice(0, 10) // åªå–å‰10ç¯‡
      };
    }
  }
]
```

### 3. è¿è¡Œæ„å»º

```bash
npm run build
```

ç”Ÿæˆçš„é™æ€æ–‡ä»¶ä¼šä¿å­˜åœ¨ `dist/blog.html`ã€‚

## ğŸŒ å¯¹æ¥çœŸå®API

ä¿®æ”¹ `config.js` ä¸­çš„ `api.baseUrl`ï¼š

```javascript
api: {
  baseUrl: 'https://your-api-domain.com',  // ä½ çš„çœŸå®APIåœ°å€
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer your-token'  // å¦‚æœéœ€è¦è®¤è¯
  }
}
```

## ğŸ“Š æ•°æ®è½¬æ¢

ä½¿ç”¨ `transform` å‡½æ•°å¤„ç†APIè¿”å›çš„æ•°æ®ï¼š

```javascript
{
  name: 'index.html',
  output: 'index.html',
  api: '/api/data',
  transform: (data) => {
    // é‡å‘½åå­—æ®µ
    return {
      pageTitle: data.title,
      items: data.list.map(item => ({
        id: item.id,
        name: item.title,
        desc: item.description
      }))
    };
  }
}
```

## ğŸ¯ é«˜çº§ç”¨æ³•

### æ‰¹é‡ç”Ÿæˆé¡µé¢

å¯ä»¥é…ç½®å¤šä¸ªæ¨¡æ¿ï¼Œä¸€æ¬¡æ€§ç”Ÿæˆå¤šä¸ªé¡µé¢ï¼š

```javascript
templates: [
  { name: 'index.html', output: 'index.html', api: '/api/home' },
  { name: 'about.html', output: 'about.html', api: '/api/about' },
  { name: 'blog.html', output: 'blog.html', api: '/api/blog' },
  { name: 'contact.html', output: 'contact.html', api: '/api/contact' }
]
```

### POSTè¯·æ±‚

æ”¯æŒPOSTæ–¹æ³•ä¼ é€’å‚æ•°ï¼š

```javascript
{
  name: 'search.html',
  output: 'search-results.html',
  api: '/api/search',
  method: 'POST',
  params: {
    keyword: 'å…³é”®è¯',
    limit: 20
  }
}
```

### åŠ¨æ€ç”Ÿæˆå¤šä¸ªæ–‡ä»¶

å¦‚æœéœ€è¦æ ¹æ®æ•°æ®åŠ¨æ€ç”Ÿæˆå¤šä¸ªæ–‡ä»¶ï¼ˆå¦‚äº§å“è¯¦æƒ…é¡µï¼‰ï¼Œå¯ä»¥æ‰©å±•é…ç½®ï¼š

```javascript
// å¯ä»¥ç¼–å†™è‡ªå®šä¹‰è„šæœ¬å®ç°
// ä¾‹å¦‚ï¼šå…ˆè·å–äº§å“åˆ—è¡¨ï¼Œç„¶åä¸ºæ¯ä¸ªäº§å“ç”Ÿæˆè¯¦æƒ…é¡µ
```

## ğŸ” æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**é—®é¢˜1ï¼šæ„å»ºæ—¶å‡ºç° "APIé”™è¯¯ (500)"**

åŸå› ï¼šMockæœåŠ¡å™¨æœªå¯åŠ¨æˆ–æœªå°±ç»ª

è§£å†³ï¼šä½¿ç”¨ `npm run build:full` æˆ–å…ˆæ‰‹åŠ¨å¯åŠ¨MockæœåŠ¡å™¨

**é—®é¢˜2ï¼šæ¨¡æ¿æ¸²æŸ“é”™è¯¯**

- æ£€æŸ¥æ¨¡æ¿è¯­æ³•æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥æ•°æ®ç»“æ„æ˜¯å¦åŒ¹é…
- ä½¿ç”¨ `transform` å‡½æ•°è°ƒè¯•æ•°æ®

**é—®é¢˜3ï¼šæ–‡ä»¶æœªç”Ÿæˆ**

- æ£€æŸ¥è¾“å‡ºç›®å½•æƒé™
- æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- ç¡®è®¤æ¨¡æ¿æ–‡ä»¶å­˜åœ¨

ğŸ“– **è¯¦ç»†æ•…éšœæ’é™¤**ï¼šæŸ¥çœ‹ [æ•…éšœæ’é™¤æŒ‡å—](./docs/TROUBLESHOOTING.md)

## ğŸ“š art-template æ–‡æ¡£

æ›´å¤šæ¨¡æ¿è¯­æ³•å’Œé«˜çº§ç”¨æ³•ï¼Œè¯·å‚è€ƒï¼š

- [art-template å®˜æ–¹æ–‡æ¡£](https://aui.github.io/art-template/)
- [art-template GitHub](https://github.com/aui/art-template)

## ğŸš€ éƒ¨ç½²

æ„å»ºå®Œæˆåï¼Œå°† `dist/` ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ¨ç½²åˆ°é™æ€æœåŠ¡å™¨å³å¯ï¼š

- Nginx
- Apache
- GitHub Pages
- Vercel
- Netlify
- é˜¿é‡Œäº‘ OSS
- è…¾è®¯äº‘ COS

## ğŸ“„ License

MIT

## ğŸ’¡ æç¤º

1. **å¼€å‘æµç¨‹å»ºè®®**ï¼š
   - å…ˆä½¿ç”¨ Mock Server è¿›è¡Œå¼€å‘å’Œæµ‹è¯•
   - ç¡®è®¤æ¨¡æ¿å’Œæ•°æ®ç»“æ„æ­£ç¡®åï¼Œå†å¯¹æ¥çœŸå®API
   - ä½¿ç”¨ `--watch` æ¨¡å¼æé«˜å¼€å‘æ•ˆç‡

2. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - art-template å·²ç»éå¸¸å¿«ï¼Œæ— éœ€é¢å¤–ä¼˜åŒ–
   - å¦‚æœæœ‰å¤§é‡é¡µé¢ï¼Œå¯ä»¥è€ƒè™‘å¹¶è¡Œæ„å»º
   - é™æ€èµ„æºå»ºè®®ä½¿ç”¨CDN

3. **æ‰©å±•æ€§**ï¼š
   - å¯ä»¥æ·»åŠ å›¾ç‰‡å‹ç¼©ã€CSS/JSå‹ç¼©ç­‰åŠŸèƒ½
   - å¯ä»¥é›†æˆ PostCSSã€Babel ç­‰å·¥å…·
   - å¯ä»¥æ·»åŠ sitemapç”Ÿæˆç­‰SEOåŠŸèƒ½

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**äº«å—é™æ€ç½‘ç«™å¼€å‘çš„ä¹è¶£ï¼** ğŸ‰

